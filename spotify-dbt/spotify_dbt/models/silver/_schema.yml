version: 2

models:
  - name: dim_track
    description: "Dimension table of unique tracks"
    columns:
      - name: track_id
        description: "Primary key for the track"
        tests:
          - unique
          - not_null
      - name: track_name
        description: "Name of the track"
      - name: album_name
        description: "Album name"
      - name: duration_ms
        description: "Track duration in milliseconds"

  - name: dim_artist
    description: "Dimension table of unique artists"
    columns:
      - name: artist_id
        description: "Primary key of the artist"
        tests:
          - unique
          - not_null
      - name: artist_name
        description: "Name of the artist"

  - name: fact_top_tracks
    description: "Fact table containing track rankings and metrics"
    columns:
      - name: track_id
        description: "Foreign key to dim_track"
        tests:
          - relationships:
              to: ref('dim_track')
              field: track_id
      - name: artist_id
        description: "Foreign key to dim_artist"
        tests:
          - relationships:
              to: ref('dim_artist')
              field: artist_id
      - name: rank
        description: "Track ranking position"
      - name: popularity
        description: "Spotify popularity score"
      - name: ingested_at
        description: "API ingestion timestamp"
      - name: file_name
        description: "Source JSON filename"
